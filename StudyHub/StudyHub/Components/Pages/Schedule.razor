@page "/schedule"

<div class="schedule-container">
    <div class="schedule-header">
        <div class="schedule-header-left">
            <select class="week-select">
                <option value="current">Current Week</option>
                <option value="next">Next Week</option>
            </select>
            <select class="group-select">
                <option value="PMI-31">PMI-31</option>
                <option value="PMI-32">PMI-32</option>
                <option value="PMI-33">PMI-33</option>
                <option value="PMI-34">PMI-34</option>
            </select>
        </div>
        <button class="refresh-schedule-btn" @onclick="RefreshSchedule">
            <span class="refresh-icon">üîÑ</span>
            Refresh Schedule
        </button>
    </div>

    <div class="schedule-table-wrapper">
        <table class="schedule-table">
            <thead>
                <tr>
                    <th class="time-column"></th>
                    <th>–ü–ù</th>
                    <th>–í–¢</th>
                    <th>–°–†</th>
                    <th>–ß–¢</th>
                    <th>–ü–¢</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var timeSlot in timeSlots)
                {
                    <tr>
                        <td class="time-cell">@timeSlot</td>
                        @for (int day = 0; day < 5; day++)
                        {
                            <td class="lesson-cell">
                                @if (GetLesson(day, timeSlot) != null)
                                {
                                    var lesson = GetLesson(day, timeSlot);
                                    <div class="lesson-card lesson-type-@lesson.Type.ToLower()">
                                        <div class="lesson-type">@lesson.Type</div>
                                        <div class="lesson-subject">@lesson.Subject</div>
                                        <div class="lesson-footer">
                                            <div class="lesson-room">@lesson.Room</div>
                                            <div class="lesson-lecturer">@lesson.Lecturer</div>
                                        </div>
                                    </div>
                                }
                            </td>
                        }
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@code {
    private string[] timeSlots = new[]
    {
        "08:30 - 09:50",
        "10:10 - 11:30",
        "11:50 - 13:10",
        "13:30 - 14:50",
        "15:05 - 16:25"
    };

    // –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ - –ø–æ—Ç—ñ–º –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ –¥–∞–Ω—ñ –∑ –±–µ–∫–µ–Ω–¥—É
    private List<ScheduleLesson> lessons = new List<ScheduleLesson>
    {
        // –ü–æ–Ω–µ–¥—ñ–ª–æ–∫
        new ScheduleLesson { Day = 0, Time = "08:30 - 09:50", Type = "–õ", Subject = "–ë–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ —Å–∏—Å—Ç–µ–º–∏", Room = "111", Lecturer = "–°. –í. –õ—ñ—Ç–∏–Ω—Å—å–∫–∏–π" },
        new ScheduleLesson { Day = 0, Time = "10:10 - 11:30", Type = "–ü", Subject = "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —ñ–Ω–∂–µ–Ω–µ—Ä—ñ—è", Room = "116", Lecturer = "–õ. –ú. –ö–ª–∞–∫–æ–≤–∏—á" },
        new ScheduleLesson { Day = 0, Time = "13:30 - 14:50", Type = "–°", Subject = "–ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –≤–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤", Room = "112", Lecturer = "–û. –í. –í–æ–≤–∫" },
        
        // –í—ñ–≤—Ç–æ—Ä–æ–∫
        new ScheduleLesson { Day = 1, Time = "08:30 - 09:50", Type = "–õ", Subject = "–ë–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ —Å–∏—Å—Ç–µ–º–∏", Room = "111", Lecturer = "–°. –í. –õ—ñ—Ç–∏–Ω—Å—å–∫–∏–π" },
        new ScheduleLesson { Day = 1, Time = "10:10 - 11:30", Type = "–ü", Subject = "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —ñ–Ω–∂–µ–Ω–µ—Ä—ñ—è", Room = "116", Lecturer = "–õ. –ú. –ö–ª–∞–∫–æ–≤–∏—á" },
        
        // –°–µ—Ä–µ–¥–∞
        new ScheduleLesson { Day = 2, Time = "10:10 - 11:30", Type = "–ü", Subject = "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —ñ–Ω–∂–µ–Ω–µ—Ä—ñ—è", Room = "116", Lecturer = "–õ. –ú. –ö–ª–∞–∫–æ–≤–∏—á" },
        new ScheduleLesson { Day = 2, Time = "11:50 - 13:10", Type = "–õ", Subject = "–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Ç–∞ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è", Room = "439", Lecturer = "–ë. –ú. –ì–æ—à–∫–æ" },
        new ScheduleLesson { Day = 2, Time = "13:30 - 14:50", Type = "–°", Subject = "–ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –≤–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤", Room = "112", Lecturer = "–û. –í. –í–æ–≤–∫" },
        
        // –ß–µ—Ç–≤–µ—Ä
        new ScheduleLesson { Day = 3, Time = "08:30 - 09:50", Type = "–õ", Subject = "–ê–ª–≥–æ—Ä–∏—Ç–º–∏ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö", Room = "203", Lecturer = "–Ü. –ü. –ö–æ—Å—Ç—ñ–≤" },
        new ScheduleLesson { Day = 3, Time = "11:50 - 13:10", Type = "–ü", Subject = "–î–∏—Å–∫—Ä–µ—Ç–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞", Room = "315", Lecturer = "–ú. –°. –§–µ–¥–æ—Ä—á—É–∫" },
        new ScheduleLesson { Day = 3, Time = "13:30 - 14:50", Type = "–°", Subject = "–ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –≤–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤", Room = "112", Lecturer = "–û. –í. –í–æ–≤–∫" },
        
        // –ü'—è—Ç–Ω–∏—Ü—è
        new ScheduleLesson { Day = 4, Time = "10:10 - 11:30", Type = "–õ", Subject = "–¢–µ–æ—Ä—ñ—è –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π", Room = "221", Lecturer = "–ù. –í. –ö—É–∑–∏–∫" },
        new ScheduleLesson { Day = 4, Time = "11:50 - 13:10", Type = "–ü", Subject = "–û–ø–µ—Ä–∞—Ü—ñ–π–Ω—ñ —Å–∏—Å—Ç–µ–º–∏", Room = "118", Lecturer = "–†. –û. –®–∫—Ä–∞–±" },
        new ScheduleLesson { Day = 4, Time = "13:30 - 14:50", Type = "–°", Subject = "–ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –≤–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤", Room = "112", Lecturer = "–û. –í. –í–æ–≤–∫" },
    };

    private ScheduleLesson? GetLesson(int day, string time)
    {
        return lessons.FirstOrDefault(l => l.Day == day && l.Time == time);
    }

    private void RefreshSchedule()
    {
        // TODO: –í–∏–∫–ª–∏–∫–∞—Ç–∏ –ø–∞—Ä—Å–µ—Ä –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É –∑ —Å–∞–π—Ç—É
        // await ScheduleService.ParseAndUpdateSchedule();
    }

    private class ScheduleLesson
    {
        public int Day { get; set; }
        public string Time { get; set; } = "";
        public string Type { get; set; } = "";
        public string Subject { get; set; } = "";
        public string Room { get; set; } = "";
        public string Lecturer { get; set; } = "";
    }
}
